"use strict";(self.webpackChunkecos_project=self.webpackChunkecos_project||[]).push([[724],{2672:(e,o,t)=>{t.d(o,{A:()=>l});var r=t(9992),a=t(579);const l=(0,r.A)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},8315:(e,o,t)=>{t.d(o,{A:()=>l});var r=t(9992),a=t(579);const l=(0,r.A)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},8343:(e,o,t)=>{t.r(o),t.d(o,{default:()=>C});var r=t(9379),a=t(5043),l=t(9806),i=t(2097),s=t(4799),n=t(5895),c=t(3969),d=t(2579),u=t(6154),h=t(172),f=t(8470),b=t(8315),x=t(2672),p=t(5362),m=t(8163),v=t(9099),A=t(6547),g=t(8729),j=t(579);const C=()=>{const e=(0,m.Zp)(),{user:o}=(0,g.A)(),[t,C]=(0,a.useState)({title:"",subtitle:"",content:""}),[y,w]=(0,a.useState)(null),[I,k]=(0,a.useState)(null),[M,L]=(0,a.useState)(!1),W=e=>{C((0,r.A)((0,r.A)({},t),{},{[e.target.name]:e.target.value}))};return(0,j.jsxs)(l.A,{maxWidth:"md",sx:{py:4},children:[(0,j.jsx)(i.A,{startIcon:(0,j.jsx)(b.A,{}),onClick:()=>e("/"),sx:{mb:3,color:"#aaa","&:hover":{color:"#f2a900"}},children:"Voltar"}),(0,j.jsxs)(s.A,{elevation:3,sx:{p:4,bgcolor:"#1e1e1e",color:"#fff",borderRadius:2},children:[(0,j.jsx)(n.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:"#f2a900",fontWeight:"bold"},children:"Novo Artigo"}),(0,j.jsx)(n.A,{variant:"body2",sx:{mb:4,color:"#aaa"},children:"Compartilhe suas experi\xeancias et\xedlicas com a comunidade."}),(0,j.jsxs)(c.A,{component:"form",onSubmit:async r=>{r.preventDefault(),L(!0);try{let r=null;if(y){const e="".concat(Date.now(),"-").concat(A.A.generateNameFile(y.name));r=await A.A.upload("images",e,y)}const{data:{user:a}}=await v.N.auth.getUser(),l=(null===o||void 0===o?void 0:o.id)||(null===a||void 0===a?void 0:a.id),{error:i}=await v.N.from("posts").insert({title:t.title,subtitle:t.subtitle,content:t.content,image_url:r,author_id:l});if(i)throw i;e("/")}catch(a){console.error("Erro ao criar post:",a),alert("Erro ao criar o post. Verifique o console.")}finally{L(!1)}},noValidate:!0,children:[(0,j.jsx)(c.A,{sx:{mb:4,textAlign:"center",p:2,border:"2px dashed #444",borderRadius:2},children:I?(0,j.jsxs)(c.A,{sx:{position:"relative",display:"inline-block"},children:[(0,j.jsx)("img",{src:I,alt:"Preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px"}}),(0,j.jsx)(d.A,{onClick:()=>{w(null),k(null)},sx:{position:"absolute",top:-10,right:-10,bgcolor:"error.main",color:"#fff","&:hover":{bgcolor:"error.dark"}},children:(0,j.jsx)(p.A,{})})]}):(0,j.jsxs)(i.A,{variant:"outlined",component:"label",startIcon:(0,j.jsx)(f.A,{}),sx:{color:"#aaa",borderColor:"#444",py:4,width:"100%","&:hover":{borderColor:"#f2a900",color:"#f2a900"}},children:["Adicionar Imagem de Capa",(0,j.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){const o=e.target.files[0];w(o),k(URL.createObjectURL(o))}}})]})}),(0,j.jsx)(u.A,{fullWidth:!0,label:"T\xedtulo",name:"title",value:t.title,onChange:W,required:!0,variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#444"},"&:hover fieldset":{borderColor:"#f2a900"}},"& .MuiInputLabel-root":{color:"#aaa"}}}),(0,j.jsx)(u.A,{fullWidth:!0,label:"Subt\xedtulo (Resumo)",name:"subtitle",value:t.subtitle,onChange:W,variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#444"},"&:hover fieldset":{borderColor:"#f2a900"}},"& .MuiInputLabel-root":{color:"#aaa"}}}),(0,j.jsx)(u.A,{fullWidth:!0,label:"Conte\xfado",name:"content",value:t.content,onChange:W,required:!0,multiline:!0,rows:10,variant:"outlined",placeholder:"Escreva seu texto aqui. Voc\xea pode usar par\xe1grafos...",sx:{mb:4,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#444"},"&:hover fieldset":{borderColor:"#f2a900"}},"& .MuiInputLabel-root":{color:"#aaa"}}}),(0,j.jsx)(i.A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:M,startIcon:M?(0,j.jsx)(h.A,{size:20,color:"inherit"}):(0,j.jsx)(x.A,{}),sx:{bgcolor:"#f2a900",color:"#000",fontWeight:"bold",py:1.5,"&:hover":{bgcolor:"#d49400"}},children:M?"Publicando...":"Publicar Artigo"})]})]})]})}},8470:(e,o,t)=>{t.d(o,{A:()=>l});var r=t(9992),a=t(579);const l=(0,r.A)([(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,a.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera")}}]);
//# sourceMappingURL=724.e67ed2b1.chunk.js.map