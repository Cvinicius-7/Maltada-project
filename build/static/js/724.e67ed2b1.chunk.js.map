{"version":3,"file":"static/js/724.e67ed2b1.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Save.js","../node_modules/@mui/icons-material/esm/ArrowBack.js","pages/CreatePost.jsx","../node_modules/@mui/icons-material/esm/PhotoCamera.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z\"\n}), 'Save');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z\"\n}), 'ArrowBack');","import React, { useState } from \"react\";\r\nimport {\r\n  Container,\r\n  TextField,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  IconButton,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport PhotoCamera from \"@mui/icons-material/PhotoCamera\";\r\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"../services/SupabaseClient\";\r\nimport Bucket from \"../services/Bucket\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\n\r\nconst CreatePost = () => {\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    subtitle: \"\",\r\n    content: \"\",\r\n  });\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [previewUrl, setPreviewUrl] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      const file = e.target.files[0];\r\n      setImageFile(file);\r\n      setPreviewUrl(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleRemoveImage = () => {\r\n    setImageFile(null);\r\n    setPreviewUrl(null);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      let imagePath = null;\r\n\r\n      if (imageFile) {\r\n        const fileName = `${Date.now()}-${Bucket.generateNameFile(\r\n          imageFile.name\r\n        )}`;\r\n        imagePath = await Bucket.upload(\"images\", fileName, imageFile);\r\n      }\r\n      const {\r\n        data: { user: supabaseUser },\r\n      } = await supabase.auth.getUser();\r\n      const authorId = user?.id || supabaseUser?.id;\r\n\r\n      const { error } = await supabase.from(\"posts\").insert({\r\n        title: formData.title,\r\n        subtitle: formData.subtitle,\r\n        content: formData.content,\r\n        image_url: imagePath,\r\n        author_id: authorId,\r\n      });\r\n\r\n      if (error) throw error;\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Erro ao criar post:\", error);\r\n      alert(\"Erro ao criar o post. Verifique o console.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" sx={{ py: 4 }}>\r\n      <Button\r\n        startIcon={<ArrowBackIcon />}\r\n        onClick={() => navigate(\"/\")}\r\n        sx={{ mb: 3, color: \"#aaa\", \"&:hover\": { color: \"#f2a900\" } }}\r\n      >\r\n        Voltar\r\n      </Button>\r\n\r\n      <Paper\r\n        elevation={3}\r\n        sx={{ p: 4, bgcolor: \"#1e1e1e\", color: \"#fff\", borderRadius: 2 }}\r\n      >\r\n        <Typography\r\n          variant=\"h4\"\r\n          component=\"h1\"\r\n          gutterBottom\r\n          sx={{ color: \"#f2a900\", fontWeight: \"bold\" }}\r\n        >\r\n          Novo Artigo\r\n        </Typography>\r\n        <Typography variant=\"body2\" sx={{ mb: 4, color: \"#aaa\" }}>\r\n          Compartilhe suas experiências etílicas com a comunidade.\r\n        </Typography>\r\n\r\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n          <Box\r\n            sx={{\r\n              mb: 4,\r\n              textAlign: \"center\",\r\n              p: 2,\r\n              border: \"2px dashed #444\",\r\n              borderRadius: 2,\r\n            }}\r\n          >\r\n            {previewUrl ? (\r\n              <Box sx={{ position: \"relative\", display: \"inline-block\" }}>\r\n                <img\r\n                  src={previewUrl}\r\n                  alt=\"Preview\"\r\n                  style={{\r\n                    maxWidth: \"100%\",\r\n                    maxHeight: \"300px\",\r\n                    borderRadius: \"8px\",\r\n                  }}\r\n                />\r\n                <IconButton\r\n                  onClick={handleRemoveImage}\r\n                  sx={{\r\n                    position: \"absolute\",\r\n                    top: -10,\r\n                    right: -10,\r\n                    bgcolor: \"error.main\",\r\n                    color: \"#fff\",\r\n                    \"&:hover\": { bgcolor: \"error.dark\" },\r\n                  }}\r\n                >\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </Box>\r\n            ) : (\r\n              <Button\r\n                variant=\"outlined\"\r\n                component=\"label\"\r\n                startIcon={<PhotoCamera />}\r\n                sx={{\r\n                  color: \"#aaa\",\r\n                  borderColor: \"#444\",\r\n                  py: 4,\r\n                  width: \"100%\",\r\n                  \"&:hover\": { borderColor: \"#f2a900\", color: \"#f2a900\" },\r\n                }}\r\n              >\r\n                Adicionar Imagem de Capa\r\n                <input\r\n                  hidden\r\n                  accept=\"image/*\"\r\n                  type=\"file\"\r\n                  onChange={handleImageChange}\r\n                />\r\n              </Button>\r\n            )}\r\n          </Box>\r\n\r\n          <TextField\r\n            fullWidth\r\n            label=\"Título\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            required\r\n            variant=\"outlined\"\r\n            sx={{\r\n              mb: 3,\r\n              \"& .MuiOutlinedInput-root\": {\r\n                color: \"#fff\",\r\n                \"& fieldset\": { borderColor: \"#444\" },\r\n                \"&:hover fieldset\": { borderColor: \"#f2a900\" },\r\n              },\r\n              \"& .MuiInputLabel-root\": { color: \"#aaa\" },\r\n            }}\r\n          />\r\n\r\n          <TextField\r\n            fullWidth\r\n            label=\"Subtítulo (Resumo)\"\r\n            name=\"subtitle\"\r\n            value={formData.subtitle}\r\n            onChange={handleChange}\r\n            variant=\"outlined\"\r\n            sx={{\r\n              mb: 3,\r\n              \"& .MuiOutlinedInput-root\": {\r\n                color: \"#fff\",\r\n                \"& fieldset\": { borderColor: \"#444\" },\r\n                \"&:hover fieldset\": { borderColor: \"#f2a900\" },\r\n              },\r\n              \"& .MuiInputLabel-root\": { color: \"#aaa\" },\r\n            }}\r\n          />\r\n\r\n          <TextField\r\n            fullWidth\r\n            label=\"Conteúdo\"\r\n            name=\"content\"\r\n            value={formData.content}\r\n            onChange={handleChange}\r\n            required\r\n            multiline\r\n            rows={10}\r\n            variant=\"outlined\"\r\n            placeholder=\"Escreva seu texto aqui. Você pode usar parágrafos...\"\r\n            sx={{\r\n              mb: 4,\r\n              \"& .MuiOutlinedInput-root\": {\r\n                color: \"#fff\",\r\n                \"& fieldset\": { borderColor: \"#444\" },\r\n                \"&:hover fieldset\": { borderColor: \"#f2a900\" },\r\n              },\r\n              \"& .MuiInputLabel-root\": { color: \"#aaa\" },\r\n            }}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={20} color=\"inherit\" />\r\n              ) : (\r\n                <SaveIcon />\r\n              )\r\n            }\r\n            sx={{\r\n              bgcolor: \"#f2a900\",\r\n              color: \"#000\",\r\n              fontWeight: \"bold\",\r\n              py: 1.5,\r\n              \"&:hover\": { bgcolor: \"#d49400\" },\r\n            }}\r\n          >\r\n            {loading ? \"Publicando...\" : \"Publicar Artigo\"}\r\n          </Button>\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CreatePost;\r\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"3.2\"\n}, \"0\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5\"\n}, \"1\")], 'PhotoCamera');"],"names":["createSvgIcon","_jsx","d","CreatePost","navigate","useNavigate","user","useAuth","formData","setFormData","useState","title","subtitle","content","imageFile","setImageFile","previewUrl","setPreviewUrl","loading","setLoading","handleChange","e","_objectSpread","target","name","value","_jsxs","Container","maxWidth","sx","py","children","Button","startIcon","ArrowBackIcon","onClick","mb","color","Paper","elevation","p","bgcolor","borderRadius","Typography","variant","component","gutterBottom","fontWeight","Box","onSubmit","async","preventDefault","imagePath","fileName","concat","Date","now","Bucket","generateNameFile","upload","data","supabaseUser","supabase","auth","getUser","authorId","id","error","from","insert","image_url","author_id","console","alert","noValidate","textAlign","border","position","display","src","alt","style","maxHeight","IconButton","handleRemoveImage","top","right","DeleteIcon","PhotoCamera","borderColor","width","hidden","accept","type","onChange","files","file","URL","createObjectURL","TextField","fullWidth","label","required","multiline","rows","placeholder","size","disabled","CircularProgress","SaveIcon","cx","cy","r"],"sourceRoot":""}