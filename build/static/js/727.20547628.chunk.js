"use strict";(self.webpackChunkecos_project=self.webpackChunkecos_project||[]).push([[727],{49:(t,e,o)=>{o.d(e,{A:()=>u});var r=o(9379),a=o(45),l=o(5043),i=o(3849),s=o(3969),n=o(6547),c=o(579);const d=["path","alt","height","sx"],u=t=>{let{path:e,alt:o,height:u,sx:h={}}=t,f=(0,a.A)(t,d);const[x,m]=(0,l.useState)(null),[b,p]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let t=!0;return(async()=>{if(!e)return m("https://images.unsplash.com/photo-1571613316887-6f8d5cbf7ef7?auto=format&fit=crop&w=800"),void p(!1);if(e.startsWith("http"))return m(e),void p(!1);try{const o=await n.A.load(e,"images");t&&m(o)}catch(o){console.error("Erro ao carregar imagem:",o),t&&m("https://source.unsplash.com/random/800x600/?beer")}finally{t&&p(!1)}})(),()=>{t=!1}},[e]),b?(0,c.jsx)(i.A,{variant:"rectangular",width:"100%",height:u||"100%",sx:(0,r.A)({bgcolor:"rgba(255,255,255,0.1)"},h)}):"img"===f.component?(0,c.jsx)(s.A,(0,r.A)({component:"img",src:x,alt:o,height:u,sx:(0,r.A)({objectFit:"cover",width:"100%"},h)},f)):(0,c.jsx)(s.A,(0,r.A)({sx:(0,r.A)({backgroundImage:"url(".concat(x,")"),backgroundSize:"cover",backgroundPosition:"center",height:u||"100%",width:"100%"},h)},f))}},2672:(t,e,o)=>{o.d(e,{A:()=>l});var r=o(9992),a=o(579);const l=(0,r.A)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},8315:(t,e,o)=>{o.d(e,{A:()=>l});var r=o(9992),a=o(579);const l=(0,r.A)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},8470:(t,e,o)=>{o.d(e,{A:()=>l});var r=o(9992),a=o(579);const l=(0,r.A)([(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,a.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera")},8727:(t,e,o)=>{o.r(e),o.d(e,{default:()=>C});var r=o(9379),a=o(5043),l=o(3969),i=o(172),s=o(9806),n=o(2097),c=o(4799),d=o(5895),u=o(2579),h=o(6154),f=o(8470),x=o(8315),m=o(2672),b=o(5362),p=o(8163),g=o(9099),A=o(6547),j=o(49),v=o(579);const C=()=>{const{id:t}=(0,p.g)(),e=(0,p.Zp)(),[o,C]=(0,a.useState)({title:"",subtitle:"",content:""}),[y,w]=(0,a.useState)(null),[S,k]=(0,a.useState)(null),[I,W]=(0,a.useState)(null),[M,z]=(0,a.useState)(!0),[E,L]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{const{data:e,error:o}=await g.N.from("posts").select("*").eq("id",t).single();if(o)throw o;C({title:e.title,subtitle:e.subtitle,content:e.content}),w(e.image_url)}catch(o){console.error("Erro ao carregar post:",o),e("/")}finally{z(!1)}})()},[t,e]);const H=t=>{C((0,r.A)((0,r.A)({},o),{},{[t.target.name]:t.target.value}))};return M?(0,v.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",mt:10},children:(0,v.jsx)(i.A,{color:"warning"})}):(0,v.jsxs)(s.A,{maxWidth:"md",sx:{py:4},children:[(0,v.jsx)(n.A,{startIcon:(0,v.jsx)(x.A,{}),onClick:()=>e("/post/".concat(t)),sx:{mb:3,color:"#aaa","&:hover":{color:"#f2a900"}},children:"Cancelar Edi\xe7\xe3o"}),(0,v.jsxs)(c.A,{elevation:3,sx:{p:4,bgcolor:"#1e1e1e",color:"#fff",borderRadius:2},children:[(0,v.jsx)(d.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:"#f2a900",fontWeight:"bold"},children:"Editar Artigo"}),(0,v.jsxs)(l.A,{component:"form",onSubmit:async r=>{r.preventDefault(),L(!0);try{let r=y;if(S){const t="".concat(Date.now(),"-").concat(A.A.generateNameFile(S.name));r=await A.A.upload("images",t,S)}const{error:a}=await g.N.from("posts").update({title:o.title,subtitle:o.subtitle,content:o.content,image_url:r}).eq("id",t);if(a)throw a;e("/post/".concat(t))}catch(a){console.error("Erro ao atualizar post:",a),alert("Erro ao salvar altera\xe7\xf5es.")}finally{L(!1)}},noValidate:!0,children:[(0,v.jsxs)(l.A,{sx:{mb:4,textAlign:"center",p:2,border:"2px dashed #444",borderRadius:2},children:[(0,v.jsx)(d.A,{variant:"subtitle2",sx:{mb:2,color:"#aaa"},children:"Capa do Artigo"}),(I||y)&&(0,v.jsxs)(l.A,{sx:{mb:2,position:"relative",display:"inline-block"},children:[I?(0,v.jsx)("img",{src:I,alt:"New Preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px"}}):(0,v.jsx)(l.A,{sx:{maxWidth:"100%",maxHeight:"300px",display:"inline-block"},children:(0,v.jsx)(j.A,{path:y,height:300,component:"img",sx:{borderRadius:2}})}),I&&(0,v.jsx)(u.A,{onClick:()=>{k(null),W(null)},sx:{position:"absolute",top:-10,right:-10,bgcolor:"error.main",color:"#fff"},children:(0,v.jsx)(b.A,{})})]}),(0,v.jsxs)(n.A,{variant:"outlined",component:"label",startIcon:(0,v.jsx)(f.A,{}),sx:{display:"block",margin:"0 auto",color:"#aaa",borderColor:"#444","&:hover":{borderColor:"#f2a900",color:"#f2a900"}},children:[y||I?"Alterar Imagem":"Adicionar Imagem",(0,v.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:t=>{if(t.target.files&&t.target.files[0]){const e=t.target.files[0];k(e),W(URL.createObjectURL(e))}}})]})]}),(0,v.jsx)(h.A,{fullWidth:!0,label:"T\xedtulo",name:"title",value:o.title,onChange:H,required:!0,variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#444"},"&:hover fieldset":{borderColor:"#f2a900"}},"& .MuiInputLabel-root":{color:"#aaa"}}}),(0,v.jsx)(h.A,{fullWidth:!0,label:"Subt\xedtulo (Resumo)",name:"subtitle",value:o.subtitle,onChange:H,variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#444"},"&:hover fieldset":{borderColor:"#f2a900"}},"& .MuiInputLabel-root":{color:"#aaa"}}}),(0,v.jsx)(h.A,{fullWidth:!0,label:"Conte\xfado",name:"content",value:o.content,onChange:H,required:!0,multiline:!0,rows:10,variant:"outlined",sx:{mb:4,"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#444"},"&:hover fieldset":{borderColor:"#f2a900"}},"& .MuiInputLabel-root":{color:"#aaa"}}}),(0,v.jsx)(n.A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:E,startIcon:E?(0,v.jsx)(i.A,{size:20,color:"inherit"}):(0,v.jsx)(m.A,{}),sx:{bgcolor:"#f2a900",color:"#000",fontWeight:"bold",py:1.5,"&:hover":{bgcolor:"#d49400"}},children:E?"Salvando...":"Salvar Altera\xe7\xf5es"})]})]})]})}}}]);
//# sourceMappingURL=727.20547628.chunk.js.map